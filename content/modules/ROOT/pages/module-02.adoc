= Lab Guide: Configuring Event-Driven Ansible Resources
:doctype: book
:notoc:
:toc-title: Table of Contents
:nosectnums:
:icons: font

_A guide to understanding and configuring the key resources in Event-Driven Ansible: Credentials, Decision Environments, and Projects._

---

== Introduction to Automation Decisions Resources

Just like Automation Controller, Event-Driven Ansible requires several resources to be configured before you can activate a rulebook to listen for events. There are three main resource types you will work with.

[IMPORTANT]
.Ansible Automation Platform (AAP) Credentials
====
* **Username:** `admin`
* **Password:** `ansible123!`
====

[IMPORTANT]
.Gitea Credentials
====
* **Username:** `student`
* **Password:** `learn_ansible`
====

=== Credentials

Credentials in Event-Driven Ansible are used to pull content from private repositories, connect to external event sources, and secure inbound webhooks. This lab uses public repositories, so you will not need to create a source control credential.

NOTE: For more information, see the official documentation: link:https://docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/2.5/html/using_automation_decisions/eda-credentials[Using automation decisions: Chapter 2. Credentials].

=== Decision Environments

Decision Environments are container images that bundle all the necessary dependencies (such as collections with source plugins) required to execute a rulebook. They are conceptually similar to Execution Environments, which are used for running playbooks. For example, to receive events from Dynatrace, you would need a Decision Environment that includes the `dynatrace.event_driven_ansible` collection.

. **Explore the default Decision Environment.** In the `AAP` tab, navigate to **Automation Decisions** → **Decision Environments**. You will see a pre-configured environment named "Default Decision Environment." This environment is distributed by Red Hat and contains the `ansible.eda` collection, which includes source plugins for sources like AWS SQS, Kafka, and Alertmanager (which you will use soon).
+
image::Oct-17-2024_at_13.03.31-image.png[Decision Environments list view, opts="border"]

NOTE: For more information, see the official documentation: link:https://docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/2.5/html/using_automation_decisions/eda-decision-environments[Using automation decisions: Chapter 5. Decision environments].

---

== Task: Import the EDA Project

**Projects** in Event-Driven Ansible are source control repositories that contain your rulebooks. The project for this lab contains a rulebook for Alertmanager. You will now import this project.

. **Navigate to the Projects page.** In the `AAP` tab, go to **Automation Decisions** → **Projects**.
. **Create a new project** by clicking the **Create project** button.
+
image::Oct-17-2024_at_13.06.48-image.png[Create project button, opts="border"]
. **Enter the project details.** **Fill** out the form with the following details:
+
[cols="1,2a"]
|===
| Key | Value
| *Name* | `My EDA project`
| *Description* | `Project containing Event-Driven Ansible content`
| *Organization* | `Default`
| *Source control URL* | `http://gitea:3000/student/eda-project`
| *Source control credential*| _Leave blank_ (This is a public repository)
|===
. **Save and sync the project.** **Click** **Create project**. If successful, the status should show **Completed**. If you make any changes to the files in the repository, you will need to re-sync the project using the "Sync project" button.
+
image::Oct-17-2024_at_13.10.35-image.png[Successful project sync, opts="border"]
+
NOTE: For more information, see the official documentation: link:https://docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/2.5/html/using_automation_decisions/eda-projects[Using automation decisions: Chapter 4. Projects].
. **(Optional) Explore the imported project.** To see the content you just imported, navigate to the `Gitea` tab and log in. The `eda-project` repository contains several rulebooks (including `alertmanager.yml` which you'll use next) and a `playbooks` directory. The rulebooks reference the *template name* in Automation Execution, not the playbook filename.

You are now ready to proceed to the next challenge.

---
== Troubleshooting

If you experience issues with this lab, please link:https://github.com/ansible/workshops/issues
